/*Replace swim with the name of the your database
At the end an Admin user is created with the password 123.
*/
USE swim;

CREATE TABLE PARENT (
    ID INT NOT NULL AUTO_INCREMENT,
    USERNAME VARCHAR(255),
    PASSWORD VARCHAR(255),
    
    FIRST_NAME VARCHAR(255),
    LAST_NAME VARCHAR(255),
    SEX VARCHAR(255),
    DOB VARCHAR(255),
    EMAIL VARCHAR(255),
    TELEPHONE VARCHAR(255),
    ADDRESS VARCHAR(255),
    POSTCODE VARCHAR(255),
    
    PRIMARY KEY (ID)    
);

CREATE TABLE USERS (
    ID INT NOT NULL AUTO_INCREMENT,
    USERNAME VARCHAR(255),
    PASSWORD VARCHAR(255),    
    
    FIRST_NAME VARCHAR(255),
    LAST_NAME VARCHAR(255),
    SEX VARCHAR(255),
    DOB VARCHAR(255),
    EMAIL VARCHAR(255),
    TELEPHONE VARCHAR(255),
    ADDRESS VARCHAR(255),
    POSTCODE VARCHAR(255),
    
    PARENT1_ID INT,
    PARENT2_ID INT,
    
    SQUAD_ID INT,      
    
    PRIMARY KEY (ID),
    
    FOREIGN KEY (PARENT1_ID) REFERENCES PARENT(ID),
    FOREIGN KEY (PARENT2_ID) REFERENCES PARENT(ID)    
);

CREATE TABLE COACH (
    ID INT NOT NULL AUTO_INCREMENT,
    USERNAME VARCHAR(255),
    PASSWORD VARCHAR(255),
    
    FIRST_NAME VARCHAR(255),
    LAST_NAME VARCHAR(255),
    SEX VARCHAR(255),
    DOB VARCHAR(255),
    EMAIL VARCHAR(255),
    TELEPHONE VARCHAR(255),
    ADDRESS VARCHAR(255),
    POSTCODE VARCHAR(255),
        
    PRIMARY KEY (ID)    
);



CREATE TABLE TRAINING (
    ID INT NOT NULL AUTO_INCREMENT,
    
    USER_ID INT NOT NULL,

    COACH_ID INT NOT NULL,
    
    TIME_DATA VARCHAR(255),
    DISTANCE VARCHAR(255),
    STROKE VARCHAR(255),    
    DATE DATE,    
    
    PRIMARY KEY (ID),
    
    FOREIGN KEY (COACH_ID) REFERENCES COACH(ID),
    FOREIGN KEY (USER_ID) REFERENCES USERS(ID)        
);


CREATE TABLE SQUAD (
    ID INT NOT NULL AUTO_INCREMENT,
    
    COACH_ID INT NOT NULL,
    
    NAME VARCHAR(255),
    
    PRIMARY KEY (ID),
    
    FOREIGN KEY (COACH_ID) REFERENCES COACH(ID)        
    
);

CREATE TABLE GALA (
    ID INT NOT NULL AUTO_INCREMENT,
        
    NAME VARCHAR(255),
    DATE DATE,    
    
    PRIMARY KEY (ID)    
);

CREATE TABLE RACE (
    ID INT NOT NULL AUTO_INCREMENT,
    
    GALA_ID INT NOT NULL,    
        
    NAME VARCHAR(255),
    DISTANCE VARCHAR(255),
    GENDER VARCHAR(255),
    STROKE VARCHAR(255),    
    
    PRIMARY KEY (ID),

    FOREIGN KEY (GALA_ID) REFERENCES GALA(ID)    
    
);

CREATE TABLE SWIMMERS_RACE (
    ID INT NOT NULL AUTO_INCREMENT,
    
    USER_ID INT NOT NULL,    
    RACE_ID INT NOT NULL,        
        
    TIME VARCHAR(255),
    ADJUSTED_TIME VARCHAR(255),
    STROKE VARCHAR(255),
    
    PRIMARY KEY (ID),
    
    FOREIGN KEY (USER_ID) REFERENCES USERS(ID),
    FOREIGN KEY (RACE_ID) REFERENCES RACE(ID)    
);

CREATE TABLE ADMIN (
    ID INT NOT NULL AUTO_INCREMENT,
    USERNAME VARCHAR(255),
    PASSWORD VARCHAR(255),
    
    FIRST_NAME VARCHAR(255),
    LAST_NAME VARCHAR(255),
    SEX VARCHAR(255),
    DOB VARCHAR(255),
    EMAIL VARCHAR(255),
    TELEPHONE VARCHAR(255),
    ADDRESS VARCHAR(255),
    POSTCODE VARCHAR(255),
    
    PRIMARY KEY (ID)    
);


INSERT INTO `admin` (`ID`, `USERNAME`, `PASSWORD`, `FIRST_NAME`, `LAST_NAME`, `SEX`, `DOB`, `EMAIL`, `TELEPHONE`, `ADDRESS`, `POSTCODE`) VALUES (NULL, 'admin', '$2y$10$cmU78uXEy/aypiVPFOSgNOoZdaPvVevP2JAX8usMHk33jzLti5Kbq', NULL, NULL, NULL, NULL, 'admin@swimgala.com', NULL, NULL, NULL);